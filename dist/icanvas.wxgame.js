"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(exports,"__esModule",{value:!0});var defineProperty=_defineProperty,Patterns={},Canvas={SetTransform:function(t){return this.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]),this},Transform:function(t,e){return e?this.transform(1/t[0],-t[1],-t[2],1/t[3],-t[4],-t[5]):this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this},ImagePattern:function(t,e,i,n,r){return t&&t.src?(Patterns[t.src]=this.createPattern(t,"no-repeat"),this.save(),this.fillStyle=Patterns[t],this.translate(e,i),this.fillRect(0,0,n,r),this.restore(),this):this},SetSize:function(t,e){return this.canvas.width=t,this.canvas.height=e,this.fillStyle="#000000",this},Clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this.clearRect(t,e,i||this.canvas.width,n||this.canvas.height),this},FontSet:function(t,e,i,n){return t&&this.font!=t&&(this.font=t),e&&this.fillStyle!=e&&(this.fillStyle=e),i&&this.textAlign!=i&&(this.textAlign=i),n&&this.textBaseline!=n&&(this.textBaseline=n),this},Fill:function(t){return t&&this.fillStyle!=t&&(this.fillStyle=t),this.fill(),this},Stroke:function(t,e){return t&&this.strokeStyle!=t&&(this.strokeStyle=t),e&&this.lineWidth!=e&&(this.lineWidth=e),this.stroke(),this},Image:function(t,e,i,n,r){var s=Canvas.Image.GetImage(t);return Array.prototype.splice.call(arguments,0,3,s,e-(n||s.width)/2,i-(r||s.height)/2),this.drawImage.apply(this,arguments),this},Polygon:function(){var t=this,e=arguments[arguments.length-1];this.beginPath(),this.moveTo((e.x+arguments[0].x)/2,(e.y+arguments[0].y)/2);var i=Array.prototype.reduce.call(arguments,(function(e,i){return e.r?t.arcTo(e.x,e.y,i.x,i.y,e.r):t.lineTo(e.x,e.y),i})),n=arguments[0];return i.r?this.arcTo(i.x,i.y,n.x,n.y,i.r):this.lineTo(i.x,i.y),this.closePath(),this},ArcRect:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+i,e,t+i,e+n,r),this.arcTo(t+i,e+n,t,e+n,r),this.arcTo(t,e+n,t,e,r),this.arcTo(t,e,t+i,e,r),this.closePath(),this},PolygonTidy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;if(n instanceof Array){var o=n.map((function(o,a){return{x:t+i*o*Math.cos(2*(360*a/n.length+r)*Math.PI/360),y:e+i*o*Math.sin(2*(360*a/n.length+r)*Math.PI/360),r:s}}));return this.Polygon.apply(this,o)}for(var a=[],h=0;h<n;h++){var u=t+i*Math.cos(2*(360*h/n+r)*Math.PI/360),l=e+i*Math.sin(2*(360*h/n+r)*Math.PI/360);a.push({x:u,y:l,r:s})}return this.Polygon.apply(this,a)},DashLine:function(t,e,i,n,r,s){var o=r||12,a=s||3,h=i-t,u=n-e,l=Math.sqrt(h*h+u*u),c=o/l,f=a/l,p=0,d=!0;for(this.beginPath(),this.moveTo(t,e);;){var y=d?o:a,g=d?c:f;if(p+y>l&&(g=(y=l-p)/l),t+=h*g,e+=u*g,this[d?"lineTo":"moveTo"](t,e),d=!d,(p+=y)>=l)return this.closePath(),this}}};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck;function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var createClass=_createClass,Render=function(){function t(){classCallCheck(this,t),defineProperty(this,"HandleComponents",[])}return createClass(t,[{key:"Update",value:function(t,e,i){this.PreUpdate(t),this.HandleComponents.sort((function(t,e){return t._HandleParentZIndex-e._HandleParentZIndex||t._HandleZIndex-e._HandleZIndex})),this.Updating(e,i),this.HandleComponents.length=0}},{key:"PreUpdate",value:function(t){if(t)if(t instanceof Array)for(var e=0,i=t.length;e<i;e++)this.PreUpdate(t[e]);else{if(!t._visible)return;t.preUpdate&&t.preUpdate(),t.parent?t.matrix.setToArray(t.parent.matrix):t.matrix.identity(),t.matrix.translate(t.x,t.y).rotate(t.radian).scale(t.scaleX,t.scaleY),t.update&&(t._HandleParentZIndex=(t.parent&&t.parent._HandleParentZIndex||0)+t.zIndex,t._HandleZIndex=this.HandleComponents.push(t)),t.preUpdated&&t.preUpdated(),t.children.length&&this.PreUpdate(t.children),t.preChildrenUpdated&&t.preChildrenUpdated()}}},{key:"Updating",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&t.clearRect(0,0,t.canvas.width,t.canvas.height),this.HandleComponents.forEach((function(e){var i=e.alpha;0!=i&&(e.beforeUpdate&&e.beforeUpdate(t),i>1&&(i=1),i!=t.globalAlpha&&(t.globalAlpha=i),t.setTransform.apply(t,e.matrix),e.update&&e.update(t),e.updated&&e.updated(t))})),t.setTransform(1,0,0,1,0,0)}}]),t}();function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var _typeof_1=createCommonjsModule((function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=i=function(t){return e(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},i(n)}t.exports=i}));function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof_1(e)&&"function"!=typeof e?assertThisInitialized(t):e}var possibleConstructorReturn=_possibleConstructorReturn,getPrototypeOf=createCommonjsModule((function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e})),setPrototypeOf=createCommonjsModule((function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e}));function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&setPrototypeOf(t,e)}var inherits=_inherits,eventemitter3=createCommonjsModule((function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,s),!0;case 6:return l.fn.call(l.context,e,n,r,s,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||o(this,s);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||r&&!a[h].once||n&&a[h].context!==n)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a})),Touch=function(t){function e(t,i){var n;return classCallCheck(this,e),n=possibleConstructorReturn(this,getPrototypeOf(e).call(this)),defineProperty(assertThisInitialized(n),"onTouchCancel",n.onTouchEnd),t&&i?(n.Position=t,n.Size=i,n.Touches={},n):possibleConstructorReturn(n,console.error("缺少触摸范围定义"))}return inherits(e,eventemitter3),createClass(e,[{key:"onTouchStart",value:function(t){for(var e=Date.now(),i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i],s=this.Touches[r.identifier]={};s.startX=s.endX=r.clientX*this.Size.x-this.Position.x,s.startY=s.endY=r.clientY*this.Size.y-this.Position.y,s.startTime=e,s.state=1,this.emit("touchStart",s)}return this}},{key:"onTouchMove",value:function(t){for(var e=0,i=t.changedTouches.length;e<i;e++){var n=t.changedTouches[e],r=this.Touches[n.identifier];r&&(r.moveX=r.endX,r.moveY=r.endY,r.endX=n.clientX*this.Size.x-this.Position.x,r.endY=n.clientY*this.Size.y-this.Position.y,r.state=2,this.emit("touchMove",r))}return this}},{key:"onTouchEnd",value:function(t){for(var e=Date.now(),i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i],s=this.Touches[r.identifier];s&&(delete this.Touches[r.identifier],s.endX=r.clientX*this.Size.x-this.Position.x,s.endY=r.clientY*this.Size.y-this.Position.y,s.endTime=e,s.state=3,this.emit("touchEnd",s))}return this}}]),e}(),Collision=function(){function t(e,i){if(classCallCheck(this,t),!e)throw Error("缺少碰撞矩阵");if(!i)throw Error("缺少碰撞坐标");this.MatrixHandle=e,this.TouchHandle=i}return createClass(t,[{key:"InComponent",value:function(t,e){return!!t._visible&&(t.matrix?this.MatrixHandle.setToArray(t.matrix).invert():this.MatrixHandle.identity(),this.TouchHandle.x=this.MatrixHandle.a*e.x+this.MatrixHandle.c*e.y+this.MatrixHandle.tx,this.TouchHandle.y=this.MatrixHandle.b*e.x+this.MatrixHandle.d*e.y+this.MatrixHandle.ty,t.offsetTouch&&t.offsetTouch(this.TouchHandle),t.hitMe?t.hitMe(this.TouchHandle.x,this.TouchHandle.y)?this.TouchHandle:void 0:this.TouchHandle)}},{key:"Recursive",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touchTap";if(!t)return!1;if(!(t instanceof Array)){if(!t._visible)return!1;if(t.touchChildren&&t.children.length&&this.Recursive(t.children,e,i))return!0;if(!this.InComponent(t,e))return!1;if(!t[i])return t.touchStop;var n=t[i](this.TouchHandle.x,this.TouchHandle.y);return void 0===n||n}for(var r=t.length-1;r>=0;r--)if(this.Recursive(t[r],e,i))return!0}}]),t}();function Loader(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,r={};return Object.keys(t).forEach((function(s){if("_"==s){if(-1==n.indexOf(t[s]))return;var o=i.slice(0,-1),a=e+i.slice(0,-1)+"."+t[s];r[o]=a}else if("string"==typeof t[s]){if(-1==n.indexOf(t[s]))return;var h=i+s,u=e+i+s+"."+t[s];r[h]=u}else Object.assign(r,Loader(t[s],e,i+s+"/",n))})),r}function UtilWxgameTouchListen(t){wx.onTouchStart((function(e){return t.onTouchStart(e)})),wx.onTouchMove((function(e){return t.onTouchMove(e)})),wx.onTouchEnd((function(e){return t.onTouchEnd(e)})),wx.onTouchCancel((function(e){return t.onTouchEnd(e)}))}function UtilRecursiveMap(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return"string"==typeof key&&(e=e.split(i)),e.reduce((function(t,e){return t?t[e]:t}),t)}function UtilWxgameVary(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wx,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return 2==i?e[t]:1==i?function(i,n){return new Promise((function(r){return r(e[t](n?defineProperty({},n,i):i))}))}:0==i?function(i,n){return new Promise((function(r,s){return e[t](Object.assign({success:r,fail:s},n?defineProperty({},n,i):i))}))}:void 0}function UtilPointInRect(t,e,i,n,r,s){return t>=i&&t<=i+r&&e>=n&&e<=n+s}var Load=function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"resources",{}),i}return inherits(e,eventemitter3),createClass(e,[{key:"Set",value:function(t){throw Error("请先挂载加载函数(Set)")}},{key:"Get",value:function(){throw Error("请先挂载读取函数(Get)")}},{key:"load",value:function(t,e){var i=this;return this.emit("load",t,e),this.Set(e).then((function(n){i.emit("loaded",t,e,n),i.resources[t]=n}))}},{key:"preLoad",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(e);return this.emit("preLoad",n.length),Promise.all(n.map((function(n){return t.load(i+n,e[n])})))}}]),e}(),ImageControl=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).apply(this,arguments))}return inherits(e,Load),createClass(e,[{key:"Set",value:function(t){var e=this;return new Promise((function(i,n){var r=e.Get();r.onload=function(){i(r)},r.onerror=function(t){n(t)},r.key=r.src=t}))}},{key:"get",value:function(t){return this.resources[t]||e.Error||(e.Error=this.Get())}}]),e}();defineProperty(ImageControl,"Error",null);var WxgameImage=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).apply(this,arguments))}return inherits(e,ImageControl),createClass(e,[{key:"Get",value:function(){return wx.createImage()}}]),e}(),AudioControl=function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"channels",{}),defineProperty(assertThisInitialized(i),"pools",{}),defineProperty(assertThisInitialized(i),"_mute",!1),i}return inherits(e,Load),createClass(e,[{key:"channel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.channels[t]&&(this.channels[t].pause(),this.channels[t].destroy&&this.channels[t].destroy(),delete this.channels[t]),e){var n=this.Get(e,i);this.channels[t]=n,this._mute||n.play()}return this}},{key:"channelMute",value:function(t){var e=this;return!0===t?(Object.keys(this.channels).forEach((function(t){return e.channelMute(t)})),this):this.channels[t]?(this.channels[t].pause(),this.channels[t].loop?this:(this.channels[t].destroy&&this.channels[t].destroy(),delete this.channels[t],this)):this}},{key:"pool",value:function(t){if(this.pools[t]||(this.pools[t]=[]),this._mute)return this;var e=this.pools[t].find((function(t){return t.paused}));return e||this.pools[t].push(e=this.Get(t)),e.play(),this}},{key:"poolMute",value:function(t){var e=this;return!0===t?(Object.keys(this.pools).forEach((function(t){return e.poolMute(t)})),this):this.pools[t]?(this.pools[t].forEach((function(t){return t.pause()})),this):this}},{key:"mute",get:function(){return this._mute},set:function(t){var e=this;this._mute=t,t?(Object.keys(this.pools).forEach((function(t){return e.poolMute(!0)})),Object.keys(this.channels).forEach((function(t){return e.channelMute(!0)}))):Object.keys(this.channels).forEach((function(t){return e.channels[t].loop&&e.channels[t].play()}))}}]),e}(),WxgameAudio=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).apply(this,arguments))}return inherits(e,AudioControl),createClass(e,[{key:"Set",value:function(t){return new Promise((function(e,i){var n=wx.createInnerAudioContext();n.loop=!1,n.autoplay=!1,n.onCanplay((function(){e(n)})),n.onError((function(t){i(t)})),n.src=t}))}},{key:"Get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.resources[t])throw Error("音频不存在");var i=wx.createInnerAudioContext();return i.loop=e,i.autoplay=!1,i.src=this.resources[t].src,i}}]),e}();function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}var _temp,_temp$1,isNativeFunction=_isNativeFunction,construct=createCommonjsModule((function(t){function e(i,n,r){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?t.exports=e=function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&setPrototypeOf(r,i.prototype),r}:t.exports=e=Reflect.construct,e.apply(null,arguments)}t.exports=e})),wrapNativeSuper=createCommonjsModule((function(t){function e(i){var n="function"==typeof Map?new Map:void 0;return t.exports=e=function(t){if(null===t||!isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return construct(t,arguments,getPrototypeOf(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),setPrototypeOf(e,t)},e(i)}t.exports=e})),BaseArray=function(t){function e(){var t;return classCallCheck(this,e),(t=possibleConstructorReturn(this,getPrototypeOf(e).call(this,arguments.length))).setTo.apply(assertThisInitialized(t),arguments),t}return inherits(e,t),createClass(e,[{key:"set",value:function(t){for(var e=0;e<this.length;e++)this[e]=t;return this}},{key:"setTo",value:function(){return this.setToArray(arguments)}},{key:"setToArray",value:function(t){if(t===this)return this;for(var e=0;e<t.length;e++)this[e]=t[e];return this}},{key:"clone",value:function(){return(new this.constructor).setToArray(this)}},{key:"equals",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&this.length!=t.length)return!1;for(var i=e?this.length:Math.min(this.length,t.length),n=0;n<i;n++)if(this[n]!=t[n])return!1;return!0}},{key:"equalsSome",value:function(){return this.equals(arguments)}},{key:"Int8Array",get:function(){return new Int8Array(this)}},{key:"Uint8Array",get:function(){return new Uint8Array(this)}},{key:"Uint8ClampedArray",get:function(){return new Uint8ClampedArray(this)}},{key:"Int16Array",get:function(){return new Int16Array(this)}},{key:"Uint16Array",get:function(){return new Uint16Array(this)}},{key:"Int32Array",get:function(){return new Int32Array(this)}},{key:"Uint32Array",get:function(){return new Uint32Array(this)}},{key:"Float32Array",get:function(){return new Float32Array(this)}},{key:"Float64Array",get:function(){return new Float64Array(this)}},{key:"BigInt64Array",get:function(){return new BigInt64Array(this)}},{key:"BigUint64Array",get:function(){return new BigUint64Array(this)}}]),e}(wrapNativeSuper(Array)),Vector=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).apply(this,arguments))}return inherits(e,BaseArray),createClass(e,[{key:"add",value:function(t){for(var e=0;e<this.length;e++)this[e]+=t;return this}},{key:"addTo",value:function(){return this.addToVector(arguments)}},{key:"addToVector",value:function(t){for(var e=0;e<t.length;e++)this[e]+=t[e];return this}},{key:"sub",value:function(t){for(var e=0;e<this.length;e++)this[e]-=t;return this}},{key:"subTo",value:function(){return this.subToVector(arguments)}},{key:"subToVector",value:function(t){for(var e=0;e<t.length;e++)this[e]-=t[e];return this}},{key:"mult",value:function(t){for(var e=0;e<this.length;e++)this[e]*=t;return this}},{key:"multTo",value:function(){return this.multToVector(arguments)}},{key:"multToVector",value:function(t){for(var e=0;e<t.length;e++)this[e]*=t[e];return this}},{key:"div",value:function(t){for(var e=0;e<this.length;e++)this[e]/=t;return this}},{key:"divTo",value:function(){return this.divToVector(arguments)}},{key:"divToVector",value:function(t){for(var e=0;e<t.length;e++)this[e]/=t[e];return this}},{key:"zero",value:function(){for(var t=0;t<this.length;t++)this[t]=0;return this}}]),e}(),Vector2=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).call(this,t,i))}return inherits(e,Vector),createClass(e,[{key:"rotate",value:function(t){var e=Math.sin(t),i=Math.cos(t),n=i*this.x-e*this.y;return this.y=e*this.x+i*this.y,this.x=n,this}},{key:"dist",value:function(t){return this.distTo(t.x,t.y)}},{key:"distTo",value:function(t,e){var i=this.x-t,n=this.y-e;return Math.sqrt(i*i+n*n)}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),this}},{key:"max",value:function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),this}},{key:"inPolygon",value:function(t){if(arguments.length>1&&(t=arguments),t.length<3)return!1;for(var e=!1,i=0,n=t.length-1;i<t.length;n=i++){var r=t[i].x,s=t[i].y,o=t[n].x,a=t[n].y,h=s>this[1]!=a>this[1]&&this[0]<(o-r)*(this[1]-s)/(a-s)+r;h&&(e=!e)}return e}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"angle",value:function(t){return Math.acos(this.dot(t)/(this.mag()*t.mag()))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}}]),e}(),Vector3=_temp=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return classCallCheck(this,e),t=possibleConstructorReturn(this,getPrototypeOf(e).call(this,i,n,r)),defineProperty(assertThisInitialized(t),"normalize",(function(){var t=this,e=t[0],i=t[1],n=t[2],r=Math.sqrt(e*e+i*i+n*n);return r?1==r?this:(r=1/r,t[0]=e*r,t[1]=i*r,t[2]=n*r,this):(t[0]=0,t[1]=0,t[2]=0,this)})),t}return inherits(e,Vector),e}(),Vector4=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).call(this,t,i,n,r))}return inherits(e,Vector),e}(),Matrix3=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return classCallCheck(this,e),possibleConstructorReturn(this,getPrototypeOf(e).call(this,t,i,n,r,s,o,0,0,1))}return inherits(e,BaseArray),createClass(e,[{key:"a",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"b",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"c",get:function(){return this[2]},set:function(t){this[2]=t}},{key:"d",get:function(){return this[3]},set:function(t){this[3]=t}},{key:"tx",get:function(){return this[4]},set:function(t){this[4]=t}},{key:"ty",get:function(){return this[5]},set:function(t){this[5]=t}}]),createClass(e,[{key:"identity",value:function(){return this.setTo(1,0,0,1,0,0,0,0,1)}},{key:"translate",value:function(t,e){return this[4]=this[0]*t+this[2]*e+this[4],this[5]=this[1]*t+this[3]*e+this[5],this}},{key:"rotate",value:function(t){var e=Math.sin(t),i=Math.cos(t),n=this[0],r=this[1],s=this[2],o=this[3];return this[0]=n*i+s*e,this[1]=r*i+o*e,this[2]=n*-e+s*i,this[3]=r*-e+o*i,this}},{key:"scale",value:function(t,e){return this[0]*=t,this[1]*=t,this[2]*=e,this[3]*=e,this}},{key:"skew",value:function(t,e){var i=Math.tan(t),n=Math.tan(e),r=this[0],s=this[1];return this[0]+=n*this[2],this[1]+=n*this[3],this[2]+=i*r,this[3]+=i*s,this}},{key:"invert",value:function(){var t=this[0],e=this[1],i=this[2],n=this[3],r=this[4],s=this[5],o=t*n-e*i;return o?(o=1/o,this[0]=n*o,this[1]=-e*o,this[2]=-i*o,this[3]=t*o,this[4]=(i*s-n*r)*o,this[5]=(e*r-t*s)*o,this):this}},{key:"append",value:function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this}},{key:"prepend",value:function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}}]),e}(),Matrix4=function(t){function e(){var t;return classCallCheck(this,e),(t=possibleConstructorReturn(this,getPrototypeOf(e).call(this,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1))).setTo.apply(assertThisInitialized(t),arguments),t}return inherits(e,BaseArray),createClass(e,[{key:"identity",value:function(){return this.setTo(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},{key:"multiply",value:function(t){var e,i,n,r,s,o,a,h;if(n=this,(i=this)===(r=t))for(r=new Float32Array(16),e=0;e<16;++e)r[e]=i[e];for(e=0;e<4;e++)s=n[e],o=n[e+4],a=n[e+8],h=n[e+12],i[e]=s*r[0]+o*r[1]+a*r[2]+h*r[3],i[e+4]=s*r[4]+o*r[5]+a*r[6]+h*r[7],i[e+8]=s*r[8]+o*r[9]+a*r[10]+h*r[11],i[e+12]=s*r[12]+o*r[13]+a*r[14]+h*r[15];return this}},{key:"multiplyVector3",value:function(t){var e=this,i=t,n=new Vector3;return n[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+e[11],n[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+e[12],n[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+e[13],v}},{key:"multiplyVector4",value:function(t){var e=this,i=t,n=new Vector4;return n[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],n[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],n[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],n[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],v}},{key:"transpose",value:function(){var t,e;return e=(t=this)[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setInverseOf",value:function(t){var e,i,n,r;if(i=t,this,(n=new Float32Array(16))[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],n[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],n[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],n[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],n[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],n[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],n[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],n[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],n[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],n[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],n[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],n[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],n[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],n[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],n[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],n[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0===(r=i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12]))return this;for(r=1/r,e=0;e<16;e++)this[e]=n[e]*r;return this}},{key:"invert",value:function(){return this.setInverseOf(this)}},{key:"setOrtho",value:function(t,e,i,n,r,s){var o,a,h,u;if(t===e||i===n||r===s)throw"null frustum";return a=1/(e-t),h=1/(n-i),u=1/(s-r),(o=this)[0]=2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*h,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2*u,o[11]=0,o[12]=-(e+t)*a,o[13]=-(n+i)*h,o[14]=-(s+r)*u,o[15]=1,this}},{key:"ortho",value:function(t,e,i,n,r,s){return this.multiply((new this.constructor).setOrtho(t,e,i,n,r,s))}},{key:"setFrustum",value:function(t,e,i,n,r,s){var o,a,h,u;if(t===e||n===i||r===s)throw"null frustum";if(r<=0)throw"near <= 0";if(s<=0)throw"far <= 0";return a=1/(e-t),h=1/(n-i),u=1/(s-r),(o=this)[0]=2*r*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*r*h,o[6]=0,o[7]=0,o[8]=(e+t)*a,o[9]=(n+i)*h,o[10]=-(s+r)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*r*s*u,o[15]=0,this}},{key:"frustum",value:function(t,e,i,n,r,s){return this.multiply((new this.constructor).setFrustum(t,e,i,n,r,s))}},{key:"setPerspective",value:function(t,e,i,n){var r,s,o,a;if(i===n||0===e)throw"null frustum";if(i<=0)throw"near <= 0";if(n<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(o=Math.sin(t)))throw"null frustum";return s=1/(n-i),a=Math.cos(t)/o,(r=this)[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=-(n+i)*s,r[11]=-1,r[12]=0,r[13]=0,r[14]=-2*i*n*s,r[15]=0,this}},{key:"perspective",value:function(t,e,i,n){return this.multiply((new this.constructor).setPerspective(t,e,i,n))}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this;return n[0]=t,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=e,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=i,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this;return n[0]*=t,n[4]*=e,n[8]*=i,n[1]*=t,n[5]*=e,n[9]*=i,n[2]*=t,n[6]*=e,n[10]*=i,n[3]*=t,n[7]*=e,n[11]*=i,this}},{key:"setTranslate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this;return n[0]=1,n[4]=0,n[8]=0,n[12]=t,n[1]=0,n[5]=1,n[9]=0,n[13]=e,n[2]=0,n[6]=0,n[10]=1,n[14]=i,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}},{key:"translate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this;return n[12]+=n[0]*t+n[4]*e+n[8]*i,n[13]+=n[1]*t+n[5]*e+n[9]*i,n[14]+=n[2]*t+n[6]*e+n[10]*i,n[15]+=n[3]*t+n[7]*e+n[11]*i,this}},{key:"setRotate",value:function(t){var e,i,n,r,s,o,a,h,u,l,c,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e=this,i=Math.sin(t),n=Math.cos(t),0!==p&&0===d&&0===y?(p<0&&(i=-i),e[0]=1,e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=n,e[9]=-i,e[13]=0,e[2]=0,e[6]=i,e[10]=n,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1):0===p&&0!==d&&0===y?(d<0&&(i=-i),e[0]=n,e[4]=0,e[8]=i,e[12]=0,e[1]=0,e[5]=1,e[9]=0,e[13]=0,e[2]=-i,e[6]=0,e[10]=n,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1):0===p&&0===d&&0!==y?(y<0&&(i=-i),e[0]=n,e[4]=-i,e[8]=0,e[12]=0,e[1]=i,e[5]=n,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=1,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1):(1!==(r=Math.sqrt(p*p+d*d+y*y))&&(p*=s=1/r,d*=s,y*=s),o=1-n,a=p*d,h=d*y,u=y*p,l=p*i,c=d*i,f=y*i,e[0]=p*p*o+n,e[1]=a*o+f,e[2]=u*o-c,e[3]=0,e[4]=a*o-f,e[5]=d*d*o+n,e[6]=h*o+l,e[7]=0,e[8]=u*o+c,e[9]=h*o-l,e[10]=y*y*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1),this}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return this.multiply((new this.constructor).setRotate(t,e,i,n))}},{key:"setLookAt",value:function(t,e,i,n,r,s,o,a,h){var u,l,c,f,p,d,y,g,v,m,x,k;return l=n-t,c=r-e,f=s-i,d=(c*=p=1/Math.sqrt(l*l+c*c+f*f))*h-(f*=p)*a,y=f*o-(l*=p)*h,g=l*a-c*o,m=(y*=v=1/Math.sqrt(d*d+y*y+g*g))*f-(g*=v)*c,x=g*l-(d*=v)*f,k=d*c-y*l,(u=this)[0]=d,u[1]=m,u[2]=-l,u[3]=0,u[4]=y,u[5]=x,u[6]=-c,u[7]=0,u[8]=g,u[9]=k,u[10]=-f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this.translate(-t,-e,-i)}},{key:"lookAt",value:function(t,e,i,n,r,s,o,a,h){return this.multiply((new this.constructor).setLookAt(t,e,i,n,r,s,o,a,h))}},{key:"dropShadow",value:function(t,e){var i=new this.constructor,n=i,r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return n[0]=r-e[0]*t[0],n[1]=-e[1]*t[0],n[2]=-e[2]*t[0],n[3]=-e[3]*t[0],n[4]=-e[0]*t[1],n[5]=r-e[1]*t[1],n[6]=-e[2]*t[1],n[7]=-e[3]*t[1],n[8]=-e[0]*t[2],n[9]=-e[1]*t[2],n[10]=r-e[2]*t[2],n[11]=-e[3]*t[2],n[12]=-e[0]*t[3],n[13]=-e[1]*t[3],n[14]=-e[2]*t[3],n[15]=r-e[3]*t[3],this.multiply(i)}},{key:"dropShadowDirectionally",value:function(t,e,i,n,r,s,o,a,h){var u=n*t+r*e+s*i;return this.dropShadow([t,e,i,-u],[o,a,h,0])}}]),e}(),Random=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Math.random()*t|0)+e};Random.To=function(t,e){return Random(e-t,t)},Random.Array=function(t){return t[Random(t.length)]},Random.Array.Keys=Random.Keys=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||!e)return[];for(var i=[],n=Object.keys(t);n.length>0&&i.length<e;)i.push(n.splice(Random(n.length),1)[0]);return i},Random.Array.Values=Random.Values=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t||!e)return[];for(var i=[],n=Object.keys(t);n.length>0&&i.length<e;){var r=n.splice(Random(n.length),1)[0];i.push(t[r])}return i};var Week=["日","一","二","三","四","五","六"],Time=_temp$1=function(){function t(){classCallCheck(this,t),defineProperty(this,"Date",null)}return createClass(t,[{key:"Set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jstimestamp";return t?t instanceof Date?this.Data=t:"object"==_typeof_1(t)?this.Data=null:"function"==typeof t?this.Set(t(),e):this.Date=t>0?"jstimestamp"==e?new Date(1*t):new Date(1e3*t):"string"==typeof t?new Date(t):null:this.Date=null,this.Date||(this.Date=new Date),this}},{key:"Get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jstimestamp";switch(this.Date||(this.Date=new Date),e){case"Date":return this.Date;case"timestamp":return parseInt(this.Date.getTime()/1e3);case"jstimestamp":return this.Date.getTime()}return e.replace(/[YmdHisSwWqQ]/g,(function(e){return t[e]}))}},{key:"OneDay",value:function(t,e,i,n){return this.Set(t,i).Get("Ymd")==this.Set(e,n).Get("Ymd")}},{key:"OneWeek",value:function(t,e,i,n){return this.Set(t,i).ToWeek().Get("Ymd")==this.Set(e,n).ToWeek().Get("Ymd")}},{key:"ToWeek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.Date.setDate(this.Date.getDate()-(this.w||7)+t),this}},{key:"GetWeek",value:function(t,e){return this.ToWeek(t).Get(e)}},{key:"Y",get:function(){return this.Date.getFullYear()}},{key:"m",get:function(){return("00"+(this.Date.getMonth()+1)).slice(-2)}},{key:"d",get:function(){return("00"+this.Date.getDate()).slice(-2)}},{key:"H",get:function(){return("00"+this.Date.getHours()).slice(-2)}},{key:"i",get:function(){return("00"+this.Date.getMinutes()).slice(-2)}},{key:"s",get:function(){return("00"+this.Date.getSeconds()).slice(-2)}},{key:"S",get:function(){return("000"+this.Date.getMilliseconds()).slice(-3)}},{key:"w",get:function(){return this.Date.getDay()}},{key:"W",get:function(){return Week[this.w]}},{key:"q",get:function(){return(this.Date.getMonth()+3)/3|0}},{key:"Q",get:function(){return Week[this.q]}}]),t}(),time=new Time,color={hex2rgb:function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#".concat(t)},string2hex:function(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}},Position=function(){function t(){classCallCheck(this,t),defineProperty(this,"_options",{left:0,top:0,right:750,bottom:1334,cacheY:{},cacheX:{}})}return createClass(t,[{key:"getX",value:function(t){return this._options.cacheX[t]?this._options.cacheX[t]:this._options.cacheX[t]=this._options.right*t}},{key:"getY",value:function(t){return this._options.cacheY[t]?this._options.cacheY[t]:this._options.cacheY[t]=this._options.bottom*t}},{key:"width",set:function(t){this._options.right=t,this._options.center=t/2,this._options.cacheX={}},get:function(){return this._options.right}},{key:"height",set:function(t){this._options.bottom=t,this._options.middle=t/2,this._options.cacheY={}},get:function(){return this._options.bottom}},{key:"center",get:function(){return this.getX(.5)}},{key:"middle",get:function(){return this.getY(.5)}}]),t}(),Clock=function(){function t(){classCallCheck(this,t),defineProperty(this,"time",0),defineProperty(this,"then",0),defineProperty(this,"change",0),defineProperty(this,"delta",0),defineProperty(this,"interval",1e3/60)}return createClass(t,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.interval;this.interval=t,this.then=this.time=Date.now()}},{key:"step",value:function(){if(this.time=Date.now(),this.change=this.time-this.then,this.change>this.interval)return this.delta=this.change%this.interval,this.then=this.time-this.delta,!0}}]),t}();function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=getPrototypeOf(t)););return t}var superPropBase=_superPropBase,get=createCommonjsModule((function(t){function e(i,n,r){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,i){var n=superPropBase(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}},e(i,n,r||i)}t.exports=e})),Position$1=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object;return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"position",new Vector2),i}return inherits(e,t),createClass(e,[{key:"setPosition",value:function(t,e){return this.position.setTo(t,e),this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.position&&Object.assign(this.position,t.position),void 0!==t.x&&(this.position.x=t.x),void 0!==t.y&&(this.position.y=t.y),this}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}}]),e}(t)},Angle=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"radian",0),i}return inherits(e,t),createClass(e,[{key:"setRadian",value:function(t){return this.radian=t,this}},{key:"setAngle",value:function(t){return this.angle=t,this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),void 0!==t.radian&&(this.radian=t.radian),void 0!==t.angle&&(this.angle=t.angle),this}},{key:"angle",set:function(t){this.radian=t*Math.PI/180},get:function(){return 180*this.radian/Math.PI}}]),e}(t)},Scale=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"scale",new Vector2(1,1)),i}return inherits(e,t),createClass(e,[{key:"setScale",value:function(t,e){return this.scale.x=t,this.scale.y=e,this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),void 0!==t.scale&&this.scale.set(t.scale),void 0!==t.scaleX&&(this.scale.x=t.scaleX),void 0!==t.scaleY&&(this.scale.y=t.scaleY),this}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}}]),e}(t)},Anchor=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"anchor",new Vector2),i}return inherits(e,t),createClass(e,[{key:"setAnchor",value:function(t,e){return this.anchor.x=t,this.anchor.y=e,this}},{key:"setAnchorSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return this.size?(this.anchor.x=this.width*t,this.anchor.y=this.height*e,this):this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.anchor&&Object.assign(this.anchor,t.anchor),t.anchorX&&(this.anchor.x=t.anchorX),t.anchorY&&(this.anchor.y=t.anchorY),this}},{key:"offsetTouch",value:function(t){return get(getPrototypeOf(e.prototype),"offsetTouch",this)&&get(getPrototypeOf(e.prototype),"offsetTouch",this).call(this,t),t.addToVector(this.anchor)}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}}]),e}(t)},Alpha=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"_alpha",1),i}return inherits(e,t),createClass(e,[{key:"setAlpha",value:function(t){return this.alpha=t,this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),void 0!==t.alpha&&(this.alpha=t.alpha),this}},{key:"alpha",set:function(t){this._alpha=t},get:function(){return this._alpha<0&&this.parent?this.parent.alpha:this._alpha}}]),e}(t)},Visible=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"_visible",!0),i}return inherits(e,t),createClass(e,[{key:"setVisible",value:function(t){return this.visible=t,this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),void 0!==t.visible&&(this.visible=t.visible),this}},{key:"visible",get:function(){return this.parent?this._visible&&this.parent.visible:this._visible},set:function(t){this._visible!=t&&(this._visible=t,t?this.show&&this.show():this.hide&&this.hide())}}]),e}(t)},Size=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"size",new Vector2),i}return inherits(e,t),createClass(e,[{key:"setSize",value:function(t,e){return this.size.setTo(t,e),this}},{key:"setSizeLimit",value:function(t,e,i,n){if(!this.size.y)return this;var r=this.size.x/this.size.y;return t&&this.size.x>t&&(this.size.x=t,this.size.y=t/r),e&&this.size.y>e&&(this.size.y=e,this.size.x=e*r),i&&this.size.x<i&&(this.size.x=i,this.size.y=t/r),n&&this.size.y<n&&(this.size.y=e,this.size.x=e*r),this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.size&&Object.assign(this.size,t.size),void 0!==t.width&&(this.size.x=t.width),void 0!==t.height&&(this.size.y=t.height),this}},{key:"hitMe",value:function(t,e){return this.padding?t>=-this.paddingLeft&&t<=this.width+this.paddingRight&&e>=-this.paddingTop&&e<=this.height+this.paddingBottom:t>=0&&t<=this.width&&e>=0&&e<=this.height}},{key:"width",get:function(){return this.size.x},set:function(t){this.size.x=t}},{key:"height",get:function(){return this.size.y},set:function(t){this.size.y=t}}]),e}(t)},Clip=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"useClip",!1),defineProperty(assertThisInitialized(i),"clipPosition",new Vector2),defineProperty(assertThisInitialized(i),"clipSize",new Vector2),i}return inherits(e,t),createClass(e,[{key:"setClip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this.useClip=!0,this.clipPosition.setTo(t,e),this.clipSize.setTo(i,n),this.size&&this.size.setTo(i,n),this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.clip&&this.setClip.apply(this,t.clip),this}}]),e}(t)},Padding=function(t){return function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"padding",new Vector(0,0,0,0)),i}return inherits(e,t),createClass(e,[{key:"setPadding",value:function(t,e,i,n){return this.padding.setTo(t,e,i,n),this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.padding&&Object.assign(this.padding,t.padding),this}},{key:"paddingTop",get:function(){return this.padding[0]}},{key:"paddingRight",get:function(){return this.padding[1]}},{key:"paddingBottom",get:function(){return this.padding[2]}},{key:"paddingLeft",get:function(){return this.padding[3]}}]),e}(t)},Style=function(t){var e,i;return i=e=function(t){function e(){var t,i;classCallCheck(this,e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=possibleConstructorReturn(this,(t=getPrototypeOf(e)).call.apply(t,[this].concat(r))),defineProperty(assertThisInitialized(i),"style",Object.assign({},e.defaultStyle)),i}return inherits(e,t),createClass(e,[{key:"setStyle",value:function(t){return t.cacheFont||(this.style.cacheFont=""),Object.assign(this.style,t),this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.style&&this.setStyle(t.style),this}},{key:"font",set:function(t){this.style.cacheFont=t},get:function(){return this.style.cacheFont||(this._cacheFont="".concat(this.style.weight," ").concat(this.style.size,"px ").concat(this.style.family))}}]),e}(t),defineProperty(e,"defaultStyle",{color:"#FFFFFF",stroke:0,strokeColor:"#FFFFFF",family:"微软雅黑,黑体",size:26,weight:"",align:"center",baseline:"middle",cacheFont:""}),i},CID=0,Base=function(t){return function(t){function e(t){var i;return classCallCheck(this,e),i=possibleConstructorReturn(this,getPrototypeOf(e).call(this)),defineProperty(assertThisInitialized(i),"id",++CID),defineProperty(assertThisInitialized(i),"zIndex",0),defineProperty(assertThisInitialized(i),"children",[]),defineProperty(assertThisInitialized(i),"parent",null),defineProperty(assertThisInitialized(i),"lockChild",!1),defineProperty(assertThisInitialized(i),"touchChildren",!0),defineProperty(assertThisInitialized(i),"touchStop",!1),defineProperty(assertThisInitialized(i),"matrix",new Matrix3),t&&i.setOptions(t),i}return inherits(e,t),createClass(e,[{key:"setParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t?this.parent==t?this:(this.parent||t.addChildAt(this,e),this):this.parent?this.parent.removeChild(this):this}},{key:"addChildAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?(t.create&&t.create(),t.parent=this,-1==e?this.children.push(t):0==e?this.children.unshift(t):this.children.splice(e,0,t),t.created&&t.created(),this):this}},{key:"addChild",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.addChild(arguments[e]);return this}if(!t)return this;if(t instanceof Array){for(var i=0;i<t.length;i++)this.addChild(t[i]);return this}return this.addChildAt(t,-1)}},{key:"removeChild",value:function(t){if(!t)return this;if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.removeChild(arguments[e]);return this}if(t instanceof Array){for(var i=0;i<t.length;i++)this.removeChild(t[i]);return this}if(t.parent!=this)return this;t.lockChild||t.removeChildren(),t.destroy&&t.destroy();var n=this.children.indexOf(t);return n>=0&&this.children.splice(n,1),t.parent=null,t.destroyed&&t.destroyed(),this}},{key:"removeChildren",value:function(){for(var t=this.children.length-1;t>=0;t--)this.removeChild(this.children[t]);return this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this}}]),e}(t)},Texture=function(t){return function(t){function e(t,i){var n;return classCallCheck(this,e),n=possibleConstructorReturn(this,getPrototypeOf(e).call(this)),defineProperty(assertThisInitialized(n),"texture",null),n.setTexture(t),i&&n.setOptions(i),n}return inherits(e,t),createClass(e,[{key:"setTexture",value:function(t){return this.texture=e.GetImage?e.GetImage(t):t,this.texture?(this.size&&this.size.setTo(this.texture.width,this.texture.height),this.useFrame&&(this.useFrame=!1),this):this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.texture&&this.setTexture(t.texture),this}},{key:"update",value:function(t){this.texture&&(this.useClip?t.drawImage(this.texture,this.clipPosition.x,this.clipPosition.y,this.clipSize.x,this.clipSize.y,-this.anchor.x,-this.anchor.y,this.size.x,this.size.y):t.drawImage(this.texture,-this.anchor.x,-this.anchor.y,this.size.x,this.size.y))}}]),e}(t)},Scroll=function(t){return function(t){function e(t){var i;return classCallCheck(this,e),i=possibleConstructorReturn(this,getPrototypeOf(e).call(this)),defineProperty(assertThisInitialized(i),"context",null),t&&i.setOptions(t),i}return inherits(e,t),createClass(e,[{key:"setRealSize",value:function(t,e){return this.context.SetSize(t,e),this}},{key:"touchMoveX",value:function(t){var e=this.clipPosition.x,i=this.scrollWidth;return this.clipPosition.x-=t,this.clipPosition.x>i&&(this.clipPosition.x=i),this.clipPosition.x<0&&(this.clipPosition.x=0),this.clipPosition.x!=e}},{key:"touchMoveY",value:function(t){var e=this.clipPosition.y,i=this.scrollHeight;return this.clipPosition.y-=t,this.clipPosition.y>i&&(this.clipPosition.y=i),this.clipPosition.y<0&&(this.clipPosition.y=0),this.clipPosition.y!=e}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.context=t.context,this.setClip(0,0,t.width||1,t.height||1),this.setRealSize(t.realWidth||t.width||1,t.realHeight||t.width||1),this}},{key:"update",value:function(t){t.drawImage(this.context.canvas,this.clipPosition.x,this.clipPosition.y,this.size.x,this.size.y,-this.anchor.x,-this.anchor.y,this.size.x,this.size.y)}},{key:"offsetTouch",value:function(t){return get(getPrototypeOf(e.prototype),"offsetTouch",this)&&get(getPrototypeOf(e.prototype),"offsetTouch",this).call(this,t),t.addToVector(this.clipPosition)}},{key:"hitMe",value:function(t,i){return t-=this.clipPosition.x,i-=this.clipPosition.y,get(getPrototypeOf(e.prototype),"hitMe",this).call(this,t,i)}},{key:"realWidth",get:function(){return this.context.canvas.width}},{key:"realHeight",get:function(){return this.context.canvas.height}},{key:"scrollHeight",get:function(){return this.realHeight-this.height}},{key:"scrollWidth",get:function(){return this.realWidth-this.width}}]),e}(t)},Text=function(t){var e,i;return i=e=function(t){function e(t){var i;return classCallCheck(this,e),i=possibleConstructorReturn(this,getPrototypeOf(e).call(this)),defineProperty(assertThisInitialized(i),"_value",""),defineProperty(assertThisInitialized(i),"special",null),defineProperty(assertThisInitialized(i),"wrap",{width:0,height:0}),defineProperty(assertThisInitialized(i),"_LineWidth",[]),defineProperty(assertThisInitialized(i),"_Lines",[]),defineProperty(assertThisInitialized(i),"_Handle",Object.assign({},e.defaultHandle)),t&&i.setOptions(t),i}return inherits(e,t),createClass(e,[{key:"setValue",value:function(t){return this.value=t,this}},{key:"setOptions",value:function(t){return get(getPrototypeOf(e.prototype),"setOptions",this)&&get(getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.wrapWidth>0&&(this.wrapWidth=t.wrapWidth),this.lineHeight=t.lineHeight||0,t.special&&(this.special=Object.assign(this.special||{},t.special)),t.value&&(this.value=t.value),this}},{key:"separate",value:function(t){if(e.Context){e.Context.font=this.font,this._Lines.length=0,this._LineWidth.length=0,this.size.setTo(0,this.style?this.style.size:this.lineHeight);for(var i=0;i<=t.length;i++)this.checkCurrentText(t[i]);return Object.assign(this._Handle,e.defaultHandle),this.setAnchorSize(e.AlignWidth[this.style.align],e.AlignHeight[this.style.baseline])}}},{key:"checkCurrentText",value:function(t){if(e.Context&&!this.checkSpecial(t)){if(this._Handle.currentText=t,this._Handle.currentText){var i=e.Context.measureText(this._Handle.currentText);this._Handle.currentWidth=i?i.width:0}else this._Handle.currentWidth=0;if(this._Handle.nextCursorX=this._Handle.cursorX+this._Handle.currentWidth,this.wrapWidth>0&&this._Handle.nextCursorX>this.wrapWidth)return this.newLine();this._Handle.cursorX=this._Handle.nextCursorX,this._Handle.currentString+=this._Handle.currentText}}},{key:"checkSpecialObject",value:function(t){var e=t.width||this.style.size;this._Handle.nextCursorX=this._Handle.cursorX+e,this.wrapWidth>0&&this._Handle.nextCursorX>this.wrapWidth?(this._Lines.push("\n",t,"\0",t.width),this._LineWidth.push(this._Handle.cursorX),this._Handle.cursorX>this.size.x&&(this.size.x=this._Handle.cursorX),this.size.y+=this.lineHeight,this._Handle.cursorX=t.width):(this._Handle.cursorX&&this._Lines.push("\0",this._Handle.cursorX),this._Handle.cursorX=this._Handle.nextCursorX,this._Lines.push(t,"\0",this._Handle.cursorX)),this._Handle.currentString=""}},{key:"checkSpecial",value:function(t){return"\0"===t?(this._Handle.Special=!this._Handle.Special,this._Handle.Special?this._Handle.currentString&&(this._Lines.push(this._Handle.currentString),this._Handle.currentString=""):this.checkSpecialObject(this.special[this._Handle.currentString]),!0):this._Handle.Special?(this._Handle.currentString+=t,!0):void 0===t?(this._Handle.currentString&&this._Lines.push(this._Handle.currentString),this._LineWidth.push(this._Handle.cursorX),this._Handle.cursorX>this.size.x&&(this.size.x=this._Handle.cursorX),!0):"\n"===t?(this.newLine(),this._Handle.currentString="",this._Handle.cursorX=0,!0):void 0}},{key:"newLine",value:function(){this._Lines.push(this._Handle.currentString,"\n"),this._LineWidth.push(this._Handle.cursorX),this._Handle.cursorX>this.size.x&&(this.size.x=this._Handle.cursorX),this.size.y+=this.lineHeight,this._Handle.currentString=this._Handle.currentText,this._Handle.cursorX=this._Handle.currentWidth}},{key:"_defineConfig",value:function(t){t.font!=this.font&&(t.font=this.font),t.fillStyle!=this.style.color&&(t.fillStyle=this.style.color),"left"!=t.textAlign&&(t.textAlign="left"),"top"!=t.textBaseline&&(t.textBaseline="top"),this.style.stroke>0&&(t.strokeStyle!=this.style.strokeColor&&(t.strokeStyle=this.style.strokeColor),t.lineWidth!=this.style.stroke&&(t.lineWidth=this.style.stroke))}},{key:"_offsetX",value:function(t){return(this.size.x-this._LineWidth[t])*e.AlignWidth[this.style.align]-this.anchor.x}},{key:"_offsetY",value:function(t){return((this._Lines[t].height||this.style.size)-this.style.size)/2}},{key:"update",value:function(t){if(this.value){this._defineConfig(t);for(var e=0,i=this._offsetX(e++),n=i,r=-this.anchor.y,s=0;s<this._Lines.length;s++)"\0"!==this._Lines[s]?"\n"!==this._Lines[s]?"object"===_typeof_1(this._Lines[s])?t.drawImage(this._Lines[s],n,r-this._offsetY(s)):(this.style.stroke>0&&t.strokeText(this._Lines[s],n,r),t.fillText(this._Lines[s],n,r)):(n=i=this._offsetX(e++),r+=this.lineHeight):(n=i+this._Lines[s+1],s++)}}},{key:"value",set:function(t){this._value!==t&&(t||0===t?"string"!=typeof t&&(t=t.toString()):t="",this._value=t,this.separate(t))},get:function(){return this._value}},{key:"wrapWidth",get:function(){return this.wrap.width},set:function(t){this.wrap.width=t}},{key:"lineHeight",get:function(){return this.wrap.height||(this.wrap.height=this.style?1.5*this.style.size|0:0)},set:function(t){this.wrap.height=t}}]),e}(t),defineProperty(e,"AlignWidth",{left:0,center:.5,right:1}),defineProperty(e,"AlignHeight",{top:0,middle:.5,bottom:1,hanging:0,alphabetic:1,ideographic:1}),defineProperty(e,"defaultHandle",{cursorX:0,cursorY:0,nextCursorX:0,currentString:"",currentText:"",currentWidth:0,Special:!1}),i},ComponentBuild={Position:Position$1,Angle:Angle,Scale:Scale,Anchor:Anchor,Alpha:Alpha,Visible:Visible,Size:Size,Clip:Clip,Padding:Padding,Style:Style},Options=function(){function t(){classCallCheck(this,t)}return createClass(t,[{key:"setOptions",value:function(){}}]),t}();ComponentBuild.Build=function(){for(var t=Options,e=0;e<arguments.length;e++)t=ComponentBuild[arguments[e]](t);return t};var ComponentBase=Base(ComponentBuild.Build("Position","Angle","Scale","Anchor","Alpha","Visible")),ComponentTexture=Texture(Base(ComponentBuild.Build("Clip","Size","Position","Angle","Scale","Anchor","Alpha","Visible"))),ComponentScroll=Scroll(Base(ComponentBuild.Build("Clip","Size","Position","Angle","Scale","Anchor","Alpha","Visible"))),ComponentText=Text(Base(ComponentBuild.Build("Style","Size","Position","Angle","Scale","Anchor","Alpha","Visible")));function GetCanvas(t){if(GetCanvas.main||"main"==t||GetCanvas("main"),t&&GetCanvas[t])return GetCanvas[t];var e=null;if("share"==t&&"function"==typeof wx.getOpenDataContext){var i=wx.getOpenDataContext();i.canvas.getContext=function(){return i},e=i.canvas}else e="shared"==t&&"function"==typeof wx.getSharedCanvas?wx.getSharedCanvas():wx.createCanvas();return t?GetCanvas[t]=e:e}function System(){return System.wx=wx.getSystemInfoSync(),System.pixel=System.wx.pixelRatio,System.width=System.wx.screenWidth,System.height=System.wx.screenHeight,System.ratio=System.width/System.height,System}var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(isArray(i)){for(var n=[],r=0;r<i.length;++r)void 0!==i[r]&&n.push(i[r]);e.obj[e.prop]=n}}},arrayToObject=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(i[n]=t[n]);return i},merge=function t(e,i,n){if(!i)return e;if("object"!=typeof i){if(isArray(e))e.push(i);else{if(!e||"object"!=typeof e)return[e,i];(n&&(n.plainObjects||n.allowPrototypes)||!has.call(Object.prototype,i))&&(e[i]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(i);var r=e;return isArray(e)&&!isArray(i)&&(r=arrayToObject(e,n)),isArray(e)&&isArray(i)?(i.forEach((function(i,r){if(has.call(e,r)){var s=e[r];s&&"object"==typeof s&&i&&"object"==typeof i?e[r]=t(s,i,n):e.push(i)}else e[r]=i})),e):Object.keys(i).reduce((function(e,r){var s=i[r];return has.call(e,r)?e[r]=t(e[r],s,n):e[r]=s,e}),r)},assign=function(t,e){return Object.keys(e).reduce((function(t,i){return t[i]=e[i],t}),t)},decode=function(t,e,i){var n=t.replace(/\+/g," ");if("iso-8859-1"===i)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode=function(t,e,i){if(0===t.length)return t;var n=t;if("symbol"==typeof t?n=Symbol.prototype.toString.call(t):"string"!=typeof t&&(n=String(t)),"iso-8859-1"===i)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var r="",s=0;s<n.length;++s){var o=n.charCodeAt(s);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=n.charAt(s):o<128?r+=hexTable[o]:o<2048?r+=hexTable[192|o>>6]+hexTable[128|63&o]:o<55296||o>=57344?r+=hexTable[224|o>>12]+hexTable[128|o>>6&63]+hexTable[128|63&o]:(s+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(s)),r+=hexTable[240|o>>18]+hexTable[128|o>>12&63]+hexTable[128|o>>6&63]+hexTable[128|63&o])}return r},compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var r=e[n],s=r.obj[r.prop],o=Object.keys(s),a=0;a<o.length;++a){var h=o[a],u=s[h];"object"==typeof u&&null!==u&&-1===i.indexOf(u)&&(e.push({obj:s,prop:h}),i.push(u))}return compactQueue(e),t},isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},isBuffer=function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},combine=function(t,e){return[].concat(t,e)},utils={arrayToObject:arrayToObject,assign:assign,combine:combine,compact:compact,decode:decode,encode:encode,isBuffer:isBuffer,isRegExp:isRegExp,merge:merge},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats=utils.assign({default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}}},Format),has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(t,e){push.apply(t,isArray$1(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function(t){return toISO.call(t)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t},stringify=function t(e,i,n,r,s,o,a,h,u,l,c,f,p){var d=e;if("function"==typeof a?d=a(i,d):d instanceof Date?d=l(d):"comma"===n&&isArray$1(d)&&(d=d.join(",")),null===d){if(r)return o&&!f?o(i,defaults.encoder,p,"key"):i;d=""}if(isNonNullishPrimitive(d)||utils.isBuffer(d))return o?[c(f?i:o(i,defaults.encoder,p,"key"))+"="+c(o(d,defaults.encoder,p,"value"))]:[c(i)+"="+c(String(d))];var y,g=[];if(void 0===d)return g;if(isArray$1(a))y=a;else{var v=Object.keys(d);y=h?v.sort(h):v}for(var m=0;m<y.length;++m){var x=y[m];s&&null===d[x]||(isArray$1(d)?pushToArray(g,t(d[x],"function"==typeof n?n(i,x):i,n,r,s,o,a,h,u,l,c,f,p)):pushToArray(g,t(d[x],i+(u?"."+x:"["+x+"]"),n,r,s,o,a,h,u,l,c,f,p)))}return g},normalizeStringifyOptions=function(t){if(!t)return defaults;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||defaults.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=formats.default;if(void 0!==t.format){if(!has$1.call(formats.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n=formats.formatters[i],r=defaults.filter;return("function"==typeof t.filter||isArray$1(t.filter))&&(r=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===t.allowDots?defaults.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===t.delimiter?defaults.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:defaults.encode,encoder:"function"==typeof t.encoder?t.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:defaults.encodeValuesOnly,filter:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:defaults.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:defaults.strictNullHandling}},stringify_1=function(t,e){var i,n=t,r=normalizeStringifyOptions(e);"function"==typeof r.filter?n=(0,r.filter)("",n):isArray$1(r.filter)&&(i=r.filter);var s,o=[];if("object"!=typeof n||null===n)return"";s=e&&e.arrayFormat in arrayPrefixGenerators?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var a=arrayPrefixGenerators[s];i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var h=0;h<i.length;++h){var u=i[h];r.skipNulls&&null===n[u]||pushToArray(o,stringify(n[u],u,a,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.formatter,r.encodeValuesOnly,r.charset))}var l=o.join(r.delimiter),c=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),l.length>0?c+l:""},has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,defaults$1={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(t,e){var i,n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,o=r.split(e.delimiter,s),a=-1,h=e.charset;if(e.charsetSentinel)for(i=0;i<o.length;++i)0===o[i].indexOf("utf8=")&&(o[i]===charsetSentinel?h="utf-8":o[i]===isoSentinel&&(h="iso-8859-1"),a=i,i=o.length);for(i=0;i<o.length;++i)if(i!==a){var u,l,c=o[i],f=c.indexOf("]="),p=-1===f?c.indexOf("="):f+1;-1===p?(u=e.decoder(c,defaults$1.decoder,h,"key"),l=e.strictNullHandling?null:""):(u=e.decoder(c.slice(0,p),defaults$1.decoder,h,"key"),l=e.decoder(c.slice(p+1),defaults$1.decoder,h,"value")),l&&e.interpretNumericEntities&&"iso-8859-1"===h&&(l=interpretNumericEntities(l)),l&&"string"==typeof l&&e.comma&&l.indexOf(",")>-1&&(l=l.split(",")),c.indexOf("[]=")>-1&&(l=isArray$2(l)?[l]:l),has$2.call(n,u)?n[u]=utils.combine(n[u],l):n[u]=l}return n},parseObject=function(t,e,i){for(var n=e,r=t.length-1;r>=0;--r){var s,o=t[r];if("[]"===o&&i.parseArrays)s=[].concat(n);else{s=i.plainObjects?Object.create(null):{};var a="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,h=parseInt(a,10);i.parseArrays||""!==a?!isNaN(h)&&o!==a&&String(h)===a&&h>=0&&i.parseArrays&&h<=i.arrayLimit?(s=[])[h]=n:s[a]=n:s={0:n}}n=s}return n},parseKeys=function(t,e,i){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,r=/(\[[^[\]]*])/g,s=i.depth>0&&/(\[[^[\]]*])/.exec(n),o=s?n.slice(0,s.index):n,a=[];if(o){if(!i.plainObjects&&has$2.call(Object.prototype,o)&&!i.allowPrototypes)return;a.push(o)}for(var h=0;i.depth>0&&null!==(s=r.exec(n))&&h<i.depth;){if(h+=1,!i.plainObjects&&has$2.call(Object.prototype,s[1].slice(1,-1))&&!i.allowPrototypes)return;a.push(s[1])}return s&&a.push("["+n.slice(s.index)+"]"),parseObject(a,e,i)}},normalizeParseOptions=function(t){if(!t)return defaults$1;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?defaults$1.charset:t.charset;return{allowDots:void 0===t.allowDots?defaults$1.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:defaults$1.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:defaults$1.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:defaults$1.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:defaults$1.comma,decoder:"function"==typeof t.decoder?t.decoder:defaults$1.decoder,delimiter:"string"==typeof t.delimiter||utils.isRegExp(t.delimiter)?t.delimiter:defaults$1.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:defaults$1.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:defaults$1.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:defaults$1.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:defaults$1.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:defaults$1.strictNullHandling}},parse=function(t,e){var i=normalizeParseOptions(e);if(""===t||null==t)return i.plainObjects?Object.create(null):{};for(var n="string"==typeof t?parseValues(t,i):t,r=i.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],h=parseKeys(a,n[a],i);r=utils.merge(r,h,i)}return utils.compact(r)},lib={formats:formats,parse:parse,stringify:stringify_1},qsConfig={arrayFormat:"indices",encodeValuesOnly:!0};function mergeDefaultConfig(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=t.method||"get",r=t.baseURL||"",s=t.headers||{},o={common:Object.assign({},s.common)};e.forEach((function(t){o[t]=Object.assign({},s[t])})),i.forEach((function(t){o[t]=Object.assign({},s[t])}));var a=t.params?JSON.parse(JSON.stringify(t.params)):{},h=t.data?JSON.parse(JSON.stringify(t.data)):{};return{method:n,baseURL:r,headers:o,params:a,data:h}}function request(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,r=i.method||e.method||t.method,s=Object.assign({},t.headers.common,t.headers[r],e.header,i.header),o=(i.baseURL||e.baseURL||t.baseURL||"")+(i.url||e.url||t.url),a=Object.assign({},t.params,e.params,i.params),h=Object.assign({},t.data,e.data,i.data),u=i.dataType||e.dataType||t.dataType||"json",l=i.responseType||e.responseType||t.responseType||"text";"get"==r&&(a=Object.assign(h,a),h=null);var c=Promise.resolve({method:r,url:o+"?"+lib.stringify(a,qsConfig),data:h,header:s,dataType:u,responseType:l}),f=i.transformRequest||e.transformRequest||n.request.transform;f&&(c=f.reduce((function(t,e){return e?"function"==typeof e?t.then((function(t){return e(t)||t})):(e.resolve&&(t=t.then((function(t){return e.resolve(t)||t}))),e.reject&&(t=t.catch((function(t){return e.reject(t)||t}))),t):t}),c));var p=c.then((function(t){return new Promise((function(e,i){t.success=function(i){t.response=i,e(t)},t.fail=function(e){t.error=e,i(t)},wx.request(t)}))})),d=i.transformResponse||e.transformResponse||n.response.transform;return d&&(p=d.reduce((function(t,e){return e?"function"==typeof e?t.then((function(t){return e(t)||t})):(e.resolve&&(t=t.then((function(t){return e.resolve(t)||t}))),e.reject&&(t=t.catch((function(t){return e.reject(t)||t}))),t):t}),p)),p}function createInterceptors(t,e){return this.transform.push(e?{resolve:t,reject:e}:t),this}function createInstance(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["get"],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["post"],n=function t(e,i){return"string"==typeof e&&(e={url:e,method:"get"}),request(t.defaults,e,i,t.interceptors)};return n.defaults=mergeDefaultConfig(t,e,i),n.interceptors={request:{transform:[],use:createInterceptors},response:{transform:[],use:createInterceptors}},n.create=createInstance,n.request=n,e.forEach((function(t){n[t]=function(e,i,r){return n({url:e,method:t,params:i},r)}})),i.forEach((function(t){n[t]=function(e,i,r){return n({url:e,method:t,data:i},r)}})),n}var Storage={Get:function(t){return new Promise((function(e,i){wx.getStorage({success:e,fail:i,key:t})})).then((function(t){return JSON.parse(t.data)})).catch((function(){return null}))},Set:function(t,e){return new Promise((function(i,n){return wx.setStorage({success:i,fail:n,key:t,data:JSON.stringify(e)}),e}))},GetSync:function(t){return JSON.parse(wx.getStorageSync(t))},SetSync:function(t,e){return wx.setStorageSync(t,JSON.stringify(e))}};function LoginFactory(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,width:1e3,height:2e3,backgroundColor:"rgba(0,0,0,0)",borderColor:"#FFFFFF",borderWidth:0,borderRadius:0,textAlign:"center",fontSize:32,lineHeight:32},e=UtilWxgameVary("openSetting"),i=UtilWxgameVary("authorize"),n=UtilWxgameVary("getUserInfo"),r=UtilWxgameVary("login"),s=function t(e){return r().catch((function(t){return wx.showToast({title:"登陆失败，请检查登陆状态",icon:"none"}),Promise.reject(t)})).then((function(i){return e?t.GetUserInfo(e).then((function(t){return i.user=t,i})):i}))};return s.GetUserInfo=function(r){return i("scope.userInfo","scope").catch((function(){if(!0===r)return function t(i){return e().then((function(t){return t.authSetting[i]?Promise.resolve():Promise.reject()})).catch((function(){return t(i)}))}(scope);var i,n,o=(i=r,(n=wx.createUserInfoButton({type:"text",text:"",style:Object.assign(t,i),withCredentials:!1,lang:"zh_CN"})).show(),n);return s.GetUserInfo.Abort=function(){o.hide(),o.destroy(),delete s.GetUserInfo.Abort},function t(e){return new Promise((function(t,i){e.offTap(),e.onTap(t)})).then((function(i){return i.userInfo?(s.GetUserInfo.Abort&&s.GetUserInfo.Abort(),i.userInfo):t(e)}))}(o)})).then((function(){return n("zh_CN","lang")})).then((function(t){return t.userInfo}))},s}exports.ApiWxgameCanvas=GetCanvas,exports.ApiWxgameLogin=LoginFactory,exports.ApiWxgameRequest=createInstance,exports.ApiWxgameStorage=Storage,exports.ApiWxgameSystem=System,exports.ComponentBase=ComponentBase,exports.ComponentBuild=ComponentBuild,exports.ComponentScroll=ComponentScroll,exports.ComponentText=ComponentText,exports.ComponentTexture=ComponentTexture,exports.MathArray=BaseArray,exports.MathClock=Clock,exports.MathColor=color,exports.MathMatrix3=Matrix3,exports.MathMatrix4=Matrix4,exports.MathPosition=Position,exports.MathRandom=Random,exports.MathTime=time,exports.MathVector=Vector,exports.MathVector2=Vector2,exports.MathVector3=Vector3,exports.MathVector4=Vector4,exports.ResourceAudio=AudioControl,exports.ResourceImage=ImageControl,exports.ResourceWxgameAudio=WxgameAudio,exports.ResourceWxgameImage=WxgameImage,exports.UtilCanvas=Canvas,exports.UtilCollsion=Collision,exports.UtilLoaderMap=Loader,exports.UtilPointInRect=UtilPointInRect,exports.UtilRecursiveMap=UtilRecursiveMap,exports.UtilRender=Render,exports.UtilTouch=Touch,exports.UtilWxgameTouchListen=UtilWxgameTouchListen,exports.UtilWxgameVary=UtilWxgameVary;
